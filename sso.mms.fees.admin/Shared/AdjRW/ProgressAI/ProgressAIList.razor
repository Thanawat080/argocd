<style>
    .ant-modal-header {
        background-color: #ffcc41 !important;
    }
    .ant-modal-title{
        color : #334396 !important;
    }
</style>

<div class="site-layout-background" style="padding: 24px;">
    <div class="mms-nav-title">
        <div class="mms-text-title px-4 py-3">ค่าบริการทางการแพทย์ AdjRW</div>
    </div>
    <div class="container py-4">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item" aria-current="page" style="cursor:pointer;">
                    <span class="breadcum-title py-2">ผลการประมวลด้วย AI</span>
                </li>
                @*                 <li class="breadcrumb-item" aria-current="page">
                <span class="breadcum-process py-2">เเสดงหัวข้อรายงาน</span>
                </li> *@
            </ol>
        </nav>
        <hr />

        <div class="row pb-3">
@*             <div class="mms-txt-require col-md-12 col-lg-8">
            </div> *@
            <div class="col-sm-12 col-md-4">
                <div class="p-2 d-md-flex align-items-md-center">
                    <div class="mms-txt-headdetail">
                        ปีงบประมาณ
                    </div>
                    <div class="ps-md-2">
                        <Input Placeholder="Basic usage" @bind-Value="@txtValue" readonly disabled />
                    </div>
                </div>
            </div>
            <div class="col-sm-12 col-md-4">
                <div class="p-2 d-md-flex align-items-md-center">
                    <div class="mms-txt-headdetail">
                        วันที่แก้ไขล่าสุด
                    </div>
                    <div class="ps-md-2">
                        <Input Placeholder="Basic usage" @bind-Value="@txtValue" readonly disabled />
                    </div>
                </div>
            </div>
            <div class="w-30 col-md-12 col-lg-4">
                <Space Direction="@DirectionVHType.Vertical" Class="mms-btn-serch w-100">
                    <SpaceItem>
                        <Search Placeholder="ข้อมูลที่ต้องการค้นหา..." EnterButton="true" />
                    </SpaceItem>
                </Space>
            </div>
        </div>
        <Table Class="zebra-striped-table" Bordered DataSource="data" TItem="Data">
             <ColumnDefinitions>
                 <PropertyColumn Property="c=>c.Id" Align="ColumnAlign.Center" Title="ลำดับ" Width="7%" />
                 <PropertyColumn Property="c=>c.period" Align="ColumnAlign.Center" Title="รหัสสถานพยาบาล" />
                 <PropertyColumn Property="c=>c.startDate" Align="ColumnAlign.Center" Title="ชื่อสถานพยาบาล" />
                 <PropertyColumn Property="c=>c.endDate" Align="ColumnAlign.Center" Title="จำนวนรายการตรวจ" />
                 <PropertyColumn Property="c=>c.Id" Align="ColumnAlign.Center" Title="" Width="5%">
                     <img class="mx-2" title="แก้ไข" src="helper_shared/PortalAdminImage/eye.png"
                          style="width:24px;height:24px; cursor:pointer;" @onclick="(() => openModal())" />
                 </PropertyColumn>
             </ColumnDefinitions>
             <PaginationTemplate>
                 <Pagination Class="pt-2"
                             Total="context.Total"
                             PageSize="context.PageSize"
                             Current="context.PageIndex"
                                        ShowSizeChanger
                             OnChange="context.HandlePageChange" />
             </PaginationTemplate>
         </Table>
         <div class="mms-media-end">
             <div>
                 <Button Class="ant-btn-distable" @onclick=@(() => goBack(1))><i class="fa-solid fa-circle-chevron-left"></i> &nbsp; ย้อนกลับ</Button>
             </div>
         </div>
     </div>

 </div>

 <Modal Title="รายการผู้ประกันตน"
        Visible="@_visible"
        OnOk="@HandleOk"
        OnCancel="@HandleCancel"
        Width="1500"
        Footer="null">
        <ProgressAIDetail></ProgressAIDetail>
     @* <ReportsPromoteAIListSubDetail HosCode="@hoscode" HosName="@hosname" Persons="@person"></ReportsPromoteAIListSubDetail> *@
 </Modal>


 @code {
    [Parameter]
    public EventCallback<int> IndexPage { get; set; }

    string txtValue { get; set; }
    /*-- Data --*/
    public record Data(int Id, string period, string startDate, string endDate, string status);
    bool _visible = false;
    private void HandleOk(MouseEventArgs e)
    {
        Console.WriteLine(e);
        _visible = false;
    }

    private void HandleCancel(MouseEventArgs e)
    {
        Console.WriteLine(e);
        _visible = false;
    }
    public Data[] data =
    {
        new(1,"2566/5", "25/05/2566", "26/05/2566", "รอประมวลผล"),
        new(2,"2566/4", "25/04/2566", "26/04/2566", "รอประมวลผล"),
        new(3,"2566/3", "25/03/2566", "26/03/2566", "รอประมวลผล"),
        new(4,"2566/2", "25/02/2566", "26/02/2566", "รอประมวลผล"),
        new(5,"2566/1", "25/01/2566", "26/01/2566", "รอประมวลผล"),

    };

    public async Task changePage(int item)
    {
        await IndexPage.InvokeAsync(item);
    }

    public async Task goBack(int item)
    {
        await IndexPage.InvokeAsync(item);
    }

    public async Task openModal()
    {
        _visible = true;
    }
}
