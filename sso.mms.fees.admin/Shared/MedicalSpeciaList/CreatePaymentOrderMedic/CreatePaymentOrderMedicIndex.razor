
<style>
    .ant-radio-button-wrapper-checked:not(.ant-radio-button-wrapper-disabled) {
        border-color: #000;
        background-color: #FFCC41;
        color: white
    }

        .ant-radio-button-wrapper-checked:not(.ant-radio-button-wrapper-disabled):hover {
            color: white;
        }

    wrapper-checked:not(.ant-radio-button-wrapper-disabled):active {
        color: white;
        border-color: black;
    }

    .ant-radio-button-wrapper {
        color: #224183;
        border-color: black !important;
    }

        .ant-radio-button-wrapper:last-child {
            border-radius: 0 10px 10px 0;
        }

        .ant-radio-button-wrapper:first-child {
            border-radius: 10px 0 0 10px;
        }

    .ant-radio-button-wrapper-checked:not(.ant-radio-button-wrapper-disabled)::before {
        /* background-color: #1890ff; */
    }

    th .ant-checkbox-wrapper {
        display: none;
    }

    .custom-input-file {
        position: absolute;
        background: white;
        opacity: 0;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
    }

    .div-file-upload {
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        width: 100%;
        height: 100%;
    }

    .banner-box-upload {
        width: 100%;
        height: 100%;
        border-radius: 4px;
        border: 2px dashed #C4C4C4;
        background: #F6F7FC;
    }
</style>


<div class="site-layout-background" style="padding: 24px;">
    <div class="mms-nav-title">
        <div class="mms-text-title px-4 py-3">การรักษาโดยแพทย์ผู้เชี่ยวชาญพิเศษเฉพาะทางและการทำหมัน</div>
    </div>

    <div class="container py-4">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item" aria-current="page">
                    <span class="breadcum-success py-2">ประวัติการเบิกจ่าย</span>
                </li>
                <li class="breadcrumb-item" aria-current="page">
                    <span class="breadcum-process py-2">เเสดงรายการประวัติการเบิกจ่าย</span>
                </li>

            </ol>
        </nav>
        <div style="padding-top:15px;">

            <div class="row">
                <div class="d-flex">
                    <div class="d-flex col-5">
                        <div class="mms-txt-headdetail col-2">งวดที่ : &nbsp;</div>
                        <div class="col-4">

                            <select class="form-select" @bind=select
                                    aria-label="Default select example">

                                <option>6704</option>
                                <option>6705</option>
                                <option>6706</option>
                                <option>6707</option>

                            </select>
                        </div>
                        
                    </div>
                    <div class="col-3">
                        @if (text != null)
                        {
                            <Button Style="width:250px" Type="@ButtonType.Primary" ><i class="fa-solid fa-file-circle-check"></i>&nbsp; อนุมัติคำสังจ่าย</Button>
                        }
                        else
                        {
                            <div style="width:250px">
                                <Button Class="mms-btn-type-gray" Disabled><i class="fa-solid fa-file-circle-check"></i>&nbsp; อนุมัติคำสังจ่าย</Button>
                            </div>
                        }
                    </div>
                    <div class="col-4 ">
                        <Space Direction="@DirectionVHType.Vertical" Class="mms-btn-serch  col-12">
                            <SpaceItem>
                                <Search Placeholder="ชื่อสถานพยาบาล" EnterButton="true" />
                            </SpaceItem>
                        </Space>
                    </div>
                </div>
            </div>

        </div>



        <hr />


        <Table DataSource="@data" DefaultExpandAllRows Bordered>
            <ChildContent Context="data">
                <Column Width="10%" Title="ลำดับ" TData="string" Align="ColumnAlign.Center">@data.id</Column>
                <Column Width="15%" Title="รหัสสถานพยาบาล" TData="string" Align="ColumnAlign.Center">@data.code2</Column>
                <Column Width="20%" Title="ชื่อสถานพยาบาล" TData="string" Align="ColumnAlign.Center">@data.code3</Column>
                <Column Width="15%" Title="จำนวนรายการ" TData="string" Align="ColumnAlign.Center">@data.count1</Column>
                <Column Width="18%" Title="จำนวนเงินรวม(บาท)" TData="string" Align="ColumnAlign.Center">@data.count2</Column>
                <Column Width="12%" Title="สถานะ" TData="string" Align="ColumnAlign.Center">
                    @if (data.status == "รออนุมัติ")
                    {
                        <p style="color:#F89523">
                            @data.status

                        </p>
                    }

                    else if (data.status == "อนุมัติ")
                    {
                        <p style="color:#67C23A">
                            @data.status

                        </p>
                    }
                </Column>
                <Column Width="10%" Title="" TData="string" Align="ColumnAlign.Center">
                    <img class="mx-2" title="ดู" src="helper_shared/PortalAdminImage/eye.png"
                         style="width:24px;height:24px; cursor:pointer;" @onclick=@(()=> gotoPage(2)) />

                </Column>
            </ChildContent>
        </Table>

        <hr />
        <div class="row pt-3" style="padding-left: 10%">
            <div class="row">
                <div class="col-md-6 d-flex">
                    <div class="col-md-5 d-flex align-items-center">
                    <div class="mms-txt-headdetail">เลขที่หนังสือ : </div>
                    <div class="mms-txt-headdetail" style="color: red">*</div>
                    <div class="mms-txt-headdetail" style="color: black"> รง 0629/</div>&nbsp
                    </div>
                    <div class="col-md-5">
                    <Input @bind-Value="@text"></Input>
                    </div>
                </div>
                 <div class="col-md-6 d-flex">
                     <div class="col-md-4 d-flex align-items-center justify-content-end">
                     <div class="mms-txt-headdetail">วันที่ลงหนังสือ :<div style="display: inline-block; color: red">*</div> </div>
                     </div>
                     <div class="col-md-5">
                     <DatePicker @bind-Value="@dateTime"></DatePicker>
                     </div>
                </div>
            </div
            <div class="row pt-3">
                 <div class="col-md-12 d-flex" style="margin-left: 2%">
                     <div class="d-flex align-items-center">
                     <div class="mms-txt-headdetail">ชื่อผู้อนุมัติ :<div style="display: inline-block; color: red">*</div> </div>&nbsp
                     </div>
                     <div style="width: 75.5%"> 
                     <Input @bind-Value="@text"></Input>
                     </div>
                </div>
            </div>
            <div class="row pt-3">
                 <div class="col-md-6 d-flex">
                     <div class="col-md-3 d-flex align-items-center justify-content-end">
                        <div class="mms-txt-headdetail">วันที่อนุมัติ :<div style="display: inline-block; color: red">*</div> </div>&nbsp
                     </div>
                     <div class="col-md-5">
                        <DatePicker @bind-Value="@dateTime"></DatePicker>
                     </div>
                </div>
                <div class="col-md-6 d-flex">
                     <div class="col-md-3 d-flex align-items-center justify-content-end">
                         <div class="mms-txt-headdetail">แนบไฟล์ :<div style="display: inline-block; color: red">*</div> </div>&nbsp
                     </div>
                     <div class="col-md-6">
                        <div class="banner-box-upload">
                            <div class="div-file-upload">
                                <div >
                                    <InputFile class="custom-input-file " OnChange="@LoadFiles" multiple accept=".pdf" type="file"  required />
                                </div>
                                <div class="d-flex justify-content-center">
                                    @if(FileName != null){
                                         <p class="pt-2">
                                            @FileName
                                        </p>
                                    }else{
                                        <h5 class="pt-2">อัปโหลดไฟล์</h5>
                                    }
                                    
                                </div>
                            </div>
                        </div>
                     </div>
                </div>
            </div>
             <div class="mms-media-end">
                <Button Type="@ButtonType.Primary" style="padding: 4px 30px" HtmlType="submit"><i class="fa-regular fa-floppy-disk"></i> &nbsp; บันทึก</Button>
             </div>
        </div>
    </div>
</div>

@code {
    [Parameter]
    public EventCallback<int> IndexPage { get; set; }
    [Parameter]
    public EventCallback<int> GetbyId { get; set; }
    [Parameter]
    public int Page { get; set; }
    List<Data> data = new List<Data>();

    private bool checkValue { get; set; } = false;
    string x = "660802,66081";
    public string text;
    public DateTime dateTime;
    bool Type = true;
    bool select = true;
    bool openModalView;
    public string FileName;

    public IBrowserFile browserFile;

    public async Task LoadFiles(InputFileChangeEventArgs e)
    {
        FileName = e.File.Name;
        browserFile = e.File;
    }
    public async Task Indexpage(int usepage)
    {
        IndexPage.InvokeAsync(usepage);
    }
    public async Task Getbyid(int id)
    {
        GetbyId.InvokeAsync(id);
    }
    //public void ChangeVariable(bool type)
    //{
    //    Type = type;
    //    StateHasChanged();
    //}
    public class Data
    {
        public string id { get; set; }

        public string code1 { get; set; }
        public int code2 { get; set; }
        public int code3 { get; set; }



        public string name { get; set; }

        public int count1 { get; set; }
        public int count2 { get; set; }
        public string day { get; set; }
        public string status { get; set; }


    }
    private string selectedOption = "option1";

    private void HandleRadioChange(ChangeEventArgs e)
    {
        selectedOption = e.Value.ToString();
    }

    public void gotoPage(int page)
    {
        // Getbyid(Int32.Parse(id));
        Indexpage(page);
        StateHasChanged();
    }

    public void OpenModalview(bool value)
    {
        openModalView = value;
    }
    protected override void OnInitialized()
    {

        data = new List<Data>
    {
   new Data
    {
        id = "1",
        code1 = "1400108660000",
        code2 =660801,
        code3 = 10660,
        name = "โรงพยาบาลสระบุรี",
        count1 = 25,
    day ="25 เมษายน 2566",
        count2 = 2034690,
        status = "รออนุมัติ"
    },



    new Data
    {
        id = "2",
        code1 = "1400108660001",
        code2 = 660801,
        code3 = 10661,
        name = "โรงพยาบาลตาก",
        count1 = 26,
        count2 = 2034691,
    day ="25 เมษายน 2566",
        status = "รออนุมัติ"
    }
    };
    }
}
