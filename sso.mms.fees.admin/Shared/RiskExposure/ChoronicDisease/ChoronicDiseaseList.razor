

<div class="site-layout-background" style="padding: 24px;">
    <div class="mms-nav-title">
        <div class="mms-text-title px-4 py-3">ค่าบริการทางการแพทย์ตามภาระเสี่ยง</div>
    </div>
    <div class="container py-4">
        <div class="mms-txt-header p-3">กำหนดคะแนนโรคเรื้อรัง</div>
        <hr />

        <div class="row pb-3">
            <div class="col-xl-3 mms-media-start">
                <div class="mms-txt-headdetail w-50">ปีงบประมาณ</div>&nbsp;
                <Input Placeholder="Basic usage" @bind-Value="@txtValue" />
            </div>
            <div class="col-xl-4 mms-media-center">
                <div class="mms-txt-headdetail w-50">วันที่แก้ไขล่าสุด</div>&nbsp;
                <DatePicker TValue="DateTime?" Picker="@DatePickerType.Date" Format="dd/MM/yyyy" />
            </div>
            <div class="col-xl-5 mms-media-end">
                <div class="mms-txt-headdetail w-50">แก้ไขล่าสุดโดย</div>&nbsp;
                <Input Placeholder="Basic usage" @bind-Value="@txtValue" />
            </div>
        </div>

        <div class="d-flex justify-content-between">
            <Space Direction="@DirectionVHType.Horizontal" Class="d-flex justify-content-end">
                <SpaceItem>
                    <Search Placeholder="ข้อมูลที่ต้องการค้นหา.." EnterButton="true" AllowClear />
                </SpaceItem>
            </Space>
            <Button Type="@ButtonType.Primary"><i class="fa-solid fa fa-plus"></i> &nbsp; เพิ่ม</Button>
        </div>

        <div class="mt-3">
            <Table DataSource="data" OnChange="OnChange" TItem="Data" >
                 <Column Title="ลำดับ" DataIndex="No" TData="string" Align="ColumnAlign.Center" Style="background: #EAE8EC" />
                 <Column Title="โรคเรื้อรัง" DataIndex="Dicrese" TData="double" Align="ColumnAlign.Center" Style="background: #EAE8EC" />
                 <Column Title="คะแนน" DataIndex="Score" TData="int" Align="ColumnAlign.Center" Style="background: #EAE8EC" />
                 <Column Title="สถานะการใช้งาน" DataIndex="Status" TData="string" Align="ColumnAlign.Center" Width="80px" Style="background: #EAE8EC"/>
                 <Column Title="" DataIndex="NoTitle" TData="string" Align="ColumnAlign.Center" Width="80px" Style="background: #EAE8EC" >
                    <img class="mx-2" src="helper_shared/PortalAdminImage/edit.png" style="width:24px;height:24px;" @onclick=@(() => Edit(3))  />
                 </Column>
            </Table>
        </div>
    </div>
</div>

@code {
    [Parameter]
    public EventCallback<int> IndexPage { get; set; }

    string txtValue { get; set; }

    public async Task Edit(int item)
    {
        await IndexPage.InvokeAsync(item);
    }


    public record Data(string No, double Dicrese, int Score, string Status,string NoTitle);

    public Data[] data =
    {
        new("โรคเบาหวาน",4.86,70,"ใช้งาน",""),
        new("โรคความดันโลหิตสูง",3.42,89,"ไม่ใช้งาน",""),
        new("โรคตับอักเสบเรื้อรังและโรคตับแข็ง",3.83,70,"ไม่ใช้งาน",""),
        new("โรคภาวะหัวใจล้มเหลว",6.02,89,"ไม่ใช้งาน",""),
    };

    void OnChange(QueryModel<Data> query)
    {
        Console.WriteLine(JsonSerializer.Serialize(query));
    }

}