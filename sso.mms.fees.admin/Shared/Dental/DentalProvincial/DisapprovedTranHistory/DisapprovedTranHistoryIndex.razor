<div class="site-layout-background" style="padding: 24px;">
    <div class="mms-nav-title">
        <div class="mms-text-title px-4 py-3">ค่าบริการทางการแพทย์ทันตกรรม</div>
    </div>
    <div class="container py-4">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item" aria-current="page">
                    <span class="breadcum-sucress py-2">ประวัติรายการที่ไม่อนุมัติ </span>
                </li>
                <li class="breadcrumb-item" aria-current="page">
                    <span class="breadcum-process py-2">รายการที่ไม่อนุมัติ</span>
                </li>

            </ol>
        </nav>
        <hr style="width:100%" />
        <div style="padding-top:15px;">
        </div>

        <div class="mms-txt-headdetail">ช่วงเวลา</div>
        <div class="row">
            <div class="d-flex  mms-media-center">
                <div class="col-8">
                    <div class="row">
                        <div class="col-4 mms-media-center">
                            <DatePicker TValue="DateTime?" Picker="@DatePickerType.Date" Format="dd/MM/yyyy" Placeholder="Placeholder" />

                        </div>
                        <div class="mms-txt-headdetail d-flex justify-content-center align-items-center col-1" style="width:60px; ">ถึง : </div>
                        <div class="col-4 mms-media-center">

                            <DatePicker TValue="DateTime?" Picker="@DatePickerType.Date" Format="dd/MM/yyyy" Placeholder="Placeholder" />
                        </div>
                    </div>
                </div>
                <div class="col-4 ">
                    <Space Direction="@DirectionVHType.Vertical" Class="mms-btn-serch col-12">
                        <SpaceItem>
                            <Search Placeholder="ชื่อสถานพยาบาล" EnterButton="true" />
                        </SpaceItem>
                    </Space>
                </div>
            </div>
        </div>
        <br />
        <Table DataSource="listOfData" TItem="ItemData" RowClassName="@(_=>"editable-row")" Bordered ScrollX="800" Class="zebra-striped-table">
            <ChildContent Context="data">
                <Column Width="8%" Align="ColumnAlign.Center" TData="string" Title="ลำดับ">@data.Id</Column>
                <Column Width="15%" Align="ColumnAlign.Center" TData="string" Title="เลขใบคำสั่งจ่าย">@data.Key</Column>
                <Column Width="15%" Align="ColumnAlign.Center" TData="string" Title="รหัสสถานพยาบาล">@data.HosCode</Column>
                <Column Width="15%" Align="ColumnAlign.Center" TData="string" Title="เลขประจำตัวประชาชน"> @data.CardId</Column>
                <Column Width="20%" Align="ColumnAlign.Center" TData="string" Title="ชื่อ-นามสกุล"> @data.Name</Column>
                <Column Width="10%" Align="ColumnAlign.Center" TData="string" Title="วันที่ใช้สิทธิ"> @data.Date</Column>
                <Column Width="10%" Align="ColumnAlign.Center" TData="string" Title="จำนวนเงิน"> @data.Age</Column>
                <Column Width="10%" Align="ColumnAlign.Center" TData="string" Title="สถานะ">
                    @if (data.Status)
                    {
                        <div style="color:#67C23A;">จ่ายเเล้ว</div>
                    }
                    else
                    {
                        <div style="color:red;">ยังไม่จ่าย</div>
                    }
                </Column>
                <Column Width="15%" Align="ColumnAlign.Center" TData="string" Title="">
                    <img class="mx-2" title="แก้ไข" src="helper_shared/PortalAdminImage/edit.png"
                         style="width:24px;height:24px; cursor:pointer;" />
                    <img class="mx-2" title="ดู" src="helper_shared/PortalAdminImage/eye.png"
                         style="width:24px;height:24px; cursor:pointer;" @onclick=@(()=>{ _visible = true; }) />
                </Column>

            </ChildContent>
        </Table>
    </div>
</div>
<style>
    .tablestyle .ant-table-thead > tr > th {
        position: relative;
        color: #FFFFFF !important;
        font-weight: 600 !important;
        text-align: center !important;
        background: #3B6C43 !important;
        border-bottom: 1px solid #ffffff !important;
        transition: background 0.3s ease;
    }
</style>
<Modal Title="@title"
       Visible="@_visible"
       OnOk="@HandleOk"
       OnCancel="@HandleCancel"
       OkText="@okbutton"
       CancelText="@canclebutton"
       Maximizable="@true"
       DefaultMaximized="@true" Style="z-index:10200;" Class="overflow-auto">
    <Card Bordered="true" Title=@("รายละเอียดผู้ประกันตน") Style="width: 100%;border-radius: 6px 6px 6px 6px;" Size="small" Class="mms-txt-default">
        <Body>
            <div class="row">
                <div class="col-lg-3" style="color:#6A6A6A;">
                    เลขที่รับแจ้ง :
                </div>
                <div class="col-lg-3 col-mb-12">
                    670165900000018
                </div>
                <div class="col-lg-3 col-mb-12">
                </div>
                <div class="col-lg-3 col-mb-12">
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-lg-6 col-md-12 ">

                    <div class="row">
                        <div class="col" style="color:#6A6A6A;">
                            เลขบัตรประจำตัวประชาชน :
                        </div>
                        <div class="col">
                            123456789xxxx
                        </div>
                    </div>
                    <div class="row">
                        <div class="col" style="color:#6A6A6A;">
                            เพศ :
                        </div>
                        <div class="col">
                            ชาย
                        </div>
                    </div>
                    <div class="row">
                        <div class="col" style="color:#6A6A6A;">
                            สัญชาติ :
                        </div>
                        <div class="col">
                            ไทย
                        </div>
                    </div>
                    <div class="row">
                        <div class="col" style="color:#6A6A6A;">
                            เบอร์โทรศัพท์ :
                        </div>
                        <div class="col">
                            099-200-654
                        </div>

                    </div>
                </div>
                <div class="col-lg-6 col-md-12">
                    <div class="row">
                        <div class="col" style="color:#6A6A6A;">
                            ชื่อ - สกุล :
                        </div>
                        <div class="col">
                            นาย อภิรักษ์ สำรวม
                        </div>
                    </div>
                    <div class="row">
                        <div class="col" style="color:#6A6A6A;">
                            วันเกิด :
                        </div>
                        <div class="col">
                            12 พฤษภาคม 2530
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            สถานะผู้ประกันตน :
                        </div>
                        <div class="col">
                            เป็นผู้ประกันตน
                        </div>
                    </div>
                </div>
            </div>
            <hr />
            <div class="row">

                <div class="col-lg-6 col-mb-12">
                    <div class="row">
                        <div class="col-lg-6 col-mb-12" style="color:#6A6A6A;">
                            ผู้บันทึกรับแจ้ง :
                        </div>
                        <div class="col-lg-6 col-mb-12">
                            นางสาว กชกร มั่นใจ
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-mb-12">
                    <div class="row">
                        <div class="col-lg-6 col-mb-12" style="color:#6A6A6A;">
                            วันที่บันทึก :
                        </div>
                        <div class="col-lg-6 col-mb-12">
                            20/07/2565
                        </div>
                    </div>
                </div>
            </div>
        </Body>
    </Card>
    <br />
    <Card Bordered="true" Title=@("ข้อมูลสิทธิประโยชน์") Style="width: 100%;border-radius: 6px 6px 6px 6px;" Size="small" Class="mms-txt-default">
        <Body>

            <div class="row">
                <div class="col-lg-3" style="color:#6A6A6A;">
                    สิทธิประโยชน์ :
                </div>
                <div class="col-lg-3 col-mb-12">
                    ค่าอุดฟัน ถอนฟัน ขูดหินปูน
                </div>
                <div class="col-lg-3 col-mb-12">
                </div>
                <div class="col-lg-3 col-mb-12">
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-lg-6 col-md-12 ">

                    <div class="row">
                        <div class="col" style="color:#6A6A6A;">
                            ภายใน :
                        </div>
                        <div class="col">
                            1 ปี
                        </div>
                    </div>
                    <div class="row">
                        <div class="col" style="color:#6A6A6A;">
                            เบิกแล้ว :
                        </div>
                        <div class="col">
                            0.00
                        </div>
                    </div>
                    <div class="row">
                        <div class="col" style="color:#6A6A6A;">
                            วงเงินสิทธิประโยชน์คงเหลือ :
                        </div>
                        <div class="col">
                            900.00
                        </div>
                    </div>

                </div>
                <div class="col-lg-6 col-md-12">
                    <div class="row">
                        <div class="col" style="color:#6A6A6A;">

                            จำนวนเงินที่เบิกได้ :

                        </div>
                        <div class="col">
                            900.00
                        </div>
                    </div>
                    <div class="row">
                        <div class="col" style="color:#6A6A6A;">
                            เบิกครั้งนี้ :
                        </div>
                        <div class="col">
                            900.00
                        </div>
                    </div>

                </div>
            </div>

        </Body>
    </Card>
    <br />
    
    <Card Bordered="true" Title=@("รายการรักษาที่เบิก") Style="width: 100%;border-radius: 6px 6px 6px 6px;" Size="small" Class="mms-txt-default">
        <Body>
            <Table DataSource="listOfData" Bordered HidePagination Class="mms-txt-default zebra-striped-table tablestyle">
                    <PropertyColumn Width="20%" Title="ชื่อรายการ" Property="c => c.Id" Align=ColumnAlign.Left ></PropertyColumn>
                    <PropertyColumn Width="20%" Title="เลขฟัน" Property="c => c.Name" Align="@columnAlign" ></PropertyColumn>
                    <PropertyColumn Width="20%" Title="จำนวน" Property="c => c.count" Align=ColumnAlign.Center > </PropertyColumn>
                    <PropertyColumn Width="20%" Title="ค่ารักษา" Property="c => c.Name" Align=ColumnAlign.Center > </PropertyColumn>
                    <PropertyColumn Width="20%" Title="จำนวนที่เบิกได้" Property="c => c.Age " Align=ColumnAlign.Center ></PropertyColumn>
                    @{
                    var totalBorrow = listOfData.Sum(x => x.Age);
                }
                <SummaryRow>
                    <SummaryCell Align=ColumnAlign.Right ColSpan="4" Style="background:#EAE8EC;" >รวมทั้งหมด</SummaryCell>

                    <SummaryCell Align=ColumnAlign.Center Style="background:#EAE8EC;">
                        <Text>@totalBorrow</Text>
                    </SummaryCell>
                </SummaryRow>
            </Table>
        </Body>
    </Card>
    <br />
    <div class="row">
        <div class="col-lg-6 col-mb-12 ">
            <Card Bordered="true" Class="rounded-3 mms-txt-default" Style="background-color:#ECECEC;" >
                <div class="row">
                    <div class="col-lg-12">
                        <div class="row">
                            <div class="col-2"></div>
                            <div class="col-4">สถานะการอนุมัติ :</div>
                            <div class="col-6 " style="color:#D94827;">ไม่อนุมัติ  </div>
                        </div>
                        <div class="row">
                            <div class="col-2"></div>
                            <div class="col-4" style="color:#6A6A6A;"> ผู้อนุมัติ :</div>
                            <div class="col-6">-</div>
                        </div>
                        <div class="row">
                            <div class="col-2"></div>
                            <div class="col-4" style="color:#6A6A6A;">วันที่อนุมัติ :</div>
                            <div class="col-6"> -  </div>
                        </div>

                    </div>
                    <div class="col-lg-6 ">
                    </div>
                </div>
            </Card>
        </div>
        <div class="col-lg-6 col-mb-12 ">
            <Card Bordered="true" Class="rounded-3 mms-txt-default" Style=" background-color:#ECECEC;">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="row">
                            <div class="col-2"></div>
                            <div class="col-4">สถานะการจ่าย :  </div>
                            <div class="col-6 " >- </div>
                        </div>
                        <div class="row">
                            <div class="col-2"></div>
                            <div class="col-4" style="color:#6A6A6A;">วันที่จ่าย :</div>
                            <div class="col-6">-</div>
                        </div>
                        <div class="row">
                            <div class="col-2"></div>
                            <div class="col-4" style="color:#6A6A6A;">เลขใบคำสั่งจ่าย :</div>
                            <div class="col-6"> -</div>
                        </div>

                    </div>
                    <div class="col-lg-6 ">
                    </div>
                </div>
            </Card>
        </div>
    </div>
</Modal>

@using MatBlazor
@using System.ComponentModel.DataAnnotations;
@using System.Text.Json;
@using System.ComponentModel;
@code {
    string title = "จัดการคำขอใช้รถทันตกรรม";
    string Placeholder = "วว/ดด/ปปปป";
    bool _visible = false;
    RenderFragment okbutton =@<div style="color:#fff;">
        <Icon Type="save" Theme="outline" />
        บันทึก
    </div>;
    RenderFragment canclebutton =@<div>
        <Icon Type="close-circle" Theme="outline" />
        ยกเลิก
    </div>
    ;
    ColumnAlign columnAlign = ColumnAlign.Left;
    private int GetColSpan(string key, string columnTitle = "")
    {
        GetAlign(key, "รวมทั้งหมด");
        if (key == "รวมทั้งหมด")
            if (columnTitle == "รวมทั้งหมด")
                return 4;
            else
                return 0;
        else
            return 1;
    }
    private void GetAlign(string key, string columnTitle = "")
    {

        if (key == "รวมทั้งหมด")
            if (columnTitle == "รวมทั้งหมด")
                columnAlign = ColumnAlign.Right;
            else
                columnAlign = ColumnAlign.Left;
        else
            columnAlign = ColumnAlign.Center;
    }
    public class Todo
    {
        public int UserId { get; set; }
        public int Id { get; set; }
        public string Title { get; set; }
        public bool Completed { get; set; }

        public Todo()
        {
        }
    }

    Todo[] todos;
    private async void HandleOk(MouseEventArgs e)
    {
        _visible = false;
    }

    private void HandleCancel(MouseEventArgs e)
    {
        Console.WriteLine(e);
        _visible = false;
    }
    class Person
    {
        public string Value { get; set; }
        public string Name { get; set; }
    }
    List<ItemData> listOfData = new List<ItemData>();
    List<Person> _persons;
    string _selectedValue;
    Person _selectedItem;

    public class ItemData
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Key { get; set; }
        public string HosCode { get; set; }
        public string CardId { get; set; }
        public string Date { get; set; }
        public int Age { get; set; }
        public int count { get; set; }
        public bool Status { get; set; }
        public string Address { get; set; }
    };
    protected override void OnInitialized()
    {
        listOfData = Enumerable.Range(0, 3).Select(i => new ItemData 
            { 
                Id = i, 
                Key = $"1110214{i}", 
                HosCode = $"123456{i}", 
                CardId = $"123467890xx{i}", 
                Name = $"นายดวงดี  วิชัยวงศ์", 
                Date = $"23 มิ.ย 67",
                Age = 900, 
                Status = false, 
                Address = $"London Park no. {i}" }).ToList();
       
        // listOfData.Add(lastdata);
    }
}

